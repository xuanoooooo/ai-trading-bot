<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI交易机器人 - 实时监控</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
</head>
<body>
    <!-- 顶部价格滚动条 -->
    <div class="price-ticker" id="priceTicker">
        <div class="ticker-content">
            <span class="ticker-loading">正在加载实时价格...</span>
        </div>
    </div>

    <!-- 主容器 -->
    <div class="container">
        <!-- 标题 -->
        <div class="header">
            <h1>🤖 AI交易机器人实时监控</h1>
            <div class="last-update">最后更新: <span id="lastUpdate">--</span></div>
        </div>

        <!-- 运行状态 -->
        <div class="card runtime-card">
            <div class="runtime-grid-4">
                <div class="runtime-item">
                    <div class="runtime-label">📅 本次启动</div>
                    <div class="runtime-value" id="currentStartTime">--</div>
                </div>
                <div class="runtime-item">
                    <div class="runtime-label">⏱️ 本次运行</div>
                    <div class="runtime-value" id="currentRuntime">--</div>
                </div>
                <div class="runtime-item">
                    <div class="runtime-label">📊 总运行时长</div>
                    <div class="runtime-value" id="totalRuntime">--</div>
                </div>
                <div class="runtime-item">
                    <div class="runtime-label">⏰ 当前时间</div>
                    <div class="runtime-value" id="currentTime">--</div>
                </div>
            </div>
        </div>

        <!-- 账户总览 -->
        <div class="card">
            <h2>💰 账户总览</h2>
            <div class="account-grid">
                <div class="stat-item">
                    <div class="stat-label">总资金</div>
                    <div class="stat-value" id="totalBalance">--</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">可用资金</div>
                    <div class="stat-value" id="freeBalance">--</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">总盈亏</div>
                    <div class="stat-value pnl" id="totalPnl">--</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">总浮盈浮亏</div>
                    <div class="stat-value pnl" id="totalUnrealizedPnl">--</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">胜率</div>
                    <div class="stat-value" id="winRate">--</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">总交易</div>
                    <div class="stat-value" id="totalTrades">--</div>
                </div>
            </div>
        </div>

        <!-- 两栏布局 -->
        <div class="two-column">
            <!-- 左侧：当前持仓 -->
            <div class="card">
                <h2>🪙 当前持仓</h2>
                <div class="positions-list" id="positionsList">
                    <div class="loading">加载中...</div>
                </div>
            </div>

            <!-- 右侧：AI决策日志 -->
            <div class="card">
                <h2>🤖 AI决策日志</h2>
                <div class="decisions-list" id="decisionsList">
                    <div class="loading">加载中...</div>
                </div>
            </div>
        </div>

        <!-- 交易历史 + 盈亏曲线 (两栏布局) -->
        <div class="two-column">
            <!-- 左侧：交易历史 -->
            <div class="card">
                <h2>📜 交易历史</h2>
                <div class="trades-table" id="tradesTable">
                    <div class="loading">加载中...</div>
                </div>
            </div>

            <!-- 右侧：盈亏曲线图 -->
            <div class="card">
                <h2>📈 盈亏曲线</h2>
                <div class="chart-container">
                    <canvas id="pnlChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- 页脚 -->
    <div class="footer">
        <p>⚠️ 此页面仅用于监控，不执行任何交易操作</p>
        <p>交易程序独立运行，前端关闭不影响交易</p>
    </div>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>

